渲染主线程进行事件循环，从消息队列里取出任务，而消息队列里的任务是其他线程里添加进去的。

![](https://raw.githubusercontent.com/SilverCoin0214/XavierCoinPic/main/image/%08js/202302011622923.png)

## 消息队列中的任务类型

输入事件（鼠标滚动、点击、移动）、微任务、文件读写、WebSocket、JavaScript 定时器
JavaScript 执行、解析 DOM、样式计算、布局计算、CSS 动画

## 页面使用单线程的缺点

- **第一个问题是如何处理高优先级的任务**
	- 因为消息队列是先进先出原则，所以如果对于需要经常更新且显示在页面上的任务，比如DOM节点变化， 如果按照添加在任务尾部，就可能产生页面延迟。 而如果一直在同步任务里加载，会导致单个任务时间过长，又阻塞其他任务。
	- 所以才出现了微任务
	- 在消息队列里的任务成为宏任务， 而宏任务中又包含了一个微任务队列。当宏任务执行完后，不会先急着执行下一个宏任务，而是先执行当前的宏任务中的微任务。
- **第二个是如何解决单个任务执行时长过久的问题。**
	- 通过回调解决



