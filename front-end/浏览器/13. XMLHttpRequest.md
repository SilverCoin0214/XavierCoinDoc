
### 什么是回调函数呢（Callback Function）？
- 回调函数是指将一个函数作为参数传递给另一个函数， 那么这个作为参数的函数就是回调函数

同步回调函数
- 同步回调函数是指，这个回调函数执行是在它主函数返回前执行的

异步回调函数
- 回调函数没有在主函数内部被调用，也就是在它返回之后才去执行

---

异步回调是指回调函数在主函数之外执行，一般有两种方式

-   第一种是把异步函数做成一个任务，添加到信息队列尾部；
-   第二种是把异步函数添加到微任务队列中，这样就可以在当前任务的末尾处执行微任务了


## XMLHttpRequest 运作机制

![](https://raw.githubusercontent.com/SilverCoin0214/XavierCoinPic/main/image/%08js/202302011716149.png)

**第一步：创建 XMLHttpRequest 对象。**
**第二步：为 xhr 对象注册回调函数。**
**第三步：配置基础的请求信息。**
**第四步：发起请求。**

渲染进程会将请求发送给网络进程，然后网络进程负责资源的下载，等网络进程接收到数据之后，就会利用 IPC 来通知渲染进程；渲染进程接收到消息之后，会将 xhr 的回调函数封装成任务并添加到消息队列中，等主线程循环系统执行到该任务的时候，就会根据相关的状态来调用对应的回调函数

-   如果网络请求出错了，就会执行 xhr.onerror；
-   如果超时了，就会执行 xhr.ontimeout；
-   如果是正常的数据接收，就会执行 onreadystatechange 来反馈相应的状态。

##   XMLHttpRequest 使用过程中的“坑”

**1. 跨域问题**
**2. HTTPS 混合内容的问题**

