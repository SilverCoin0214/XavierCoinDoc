Webpack 是一种用于构建 JavaScript 应用程序的静态模块打包器，它能够以一种相对一致且开放的处理方式，加载应用中的所有资源文件（图片、CSS、视频、字体文件等），并将其合并打包成浏览器兼容的 Web 资源文件。

统一资源构建模型：
- 所有资源都是module， 所以可以用同一套代码实现诸多特性，包括： 代码压缩，hot module replacement, 缓存等
- 打包时，资源与资源之间非常容易实现信息互换，例如可以轻易在HTML插入base64格式的图片
- 借助loader， webpack几乎可以用任意方式处理任意类型的资源。


### webpack打包过程
![](https://s2.loli.net/2024/03/20/7fFb3Crp1KncU9x.png)

- 输入： 从文件系统读取代码文件
- 模块递归处理： 调用 Loader 转译 Module 内容， 并将结果转换为 AST， 从中分析出模块依赖关系， 进一步调用模块处理过程，直到所有依赖文件都处理完毕。
- 后处理： 所有模块递归处理完毕后开始执行处理，包括模块合并，注入运行时，产物优化等，最终输出 Chunk 集合。
- 输出： 将 Chunk 写到外部文件系统

#### webpack配置项大致可以分为2类
- 流程类： 作用于打包流程某个或若干个环节， 直接影响编译打包效果的配置项
- 工具类： 打包主流程之外， 提供更多工程化工具的配置项

1.打包流程相关的配置项：
- 输入输出
	- entry: 用于定义项目入口文件， webpack会从这些入口文件开始按图索骥找出所有文件
	- context： 项目执行上下文路径
	- output: 配置产物输出路径，名称等
- 模块处理：
	- resolve: 用于配置模块路径解析规则，可用于帮助webpack更精确，更高效的找到模块
	- module: 用于配置模块加载规则， 针对什么类型的资源需要使用那些Loader处理
	- externals: 用于声明外部资源， webpack会直接忽略这部分资源， 跳过这些资源解析，打包操作
- 后处理：
	- optimization: 用于控制如何优化打包物体积，
	- target: 用于配置编译产物的目标运行环境， 
	- mode: 编译模式短语，支持development, production等值， 可以理解为一种声明环境的短语

这里的重点是，Webpack **首先**需要根据输入配置(`entry/context`) 找到项目入口文件；**之后**根据按模块处理(`module/resolve/externals` 等) 所配置的规则逐一处理模块文件，处理过程包括转译、依赖分析等；模块处理完毕后，最后**再根据**后处理相关配置项(`optimization/target` 等)合并模块资源、注入运行时依赖、优化产物结构等。

2.工具类配置项：
- 开发效率类：
	- watch: 用于配置持续监听文件变化，持续构建
	- devtool: 用于配置产物 sourcemap 生成规则
	- devServer: 用于配置与 HMR 强相关的开发服务器功能
- 性能优化类：
	- cache: webpack5 之后，该项用于控制如何缓存编译过程信息与编译结果
	- performance: 用于配置当产物大小超过阈值时，通知开发者
- 日志类：
	- stats: 用于精确控制编译过程的日志内容
	- infrastructureLogging: 用于控制日志输出方式


