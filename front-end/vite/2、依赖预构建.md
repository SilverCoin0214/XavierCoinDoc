vite是一个提倡 no-bundle 的构建工具，能做到 **开发时** 模块按需编译，而不用打包再加载。

但是模块代码分两部分，一部分是源代码，也就是业务代码。另一部分是第三方依赖的代码，即node_modules中的代码。  所谓的 no-bundle只是对源代码而言，对于第三方依赖而言， Vite还是选择bundle(打包)。 并且使用 esbuild来完成。


#### 为什么需要预构建？
- 需要兼容 CommonJs和 UMD
- 为了性能， 将第三方库的分散文件合并成一个模块，减少http请求数量。


#### 自定义配置

Vite将预构建相关的配置都集中在 optimizeDeps属性上

- entries
	- 可以自定义预构建的入口文件
- include
	- 决定了可以强制预构建的依赖项，
		- 动态import时，由于vite天然按需加载的特性，会导致某些依赖只能在运行时识别，所以需要自己强制添加
		- 某些包被手动exclude， `exclude` 是`optimizeDeps`中的另一个配置项，与`include`相对，用于将某些依赖从预构建的过程中排除。 不过不常用
- 自定义 esbuild 行为